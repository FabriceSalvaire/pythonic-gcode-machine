

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PythonicGcodeMachine.Gcode.Rs274.Parser &mdash; PythonicGcodeMachine 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../static/css/PythonicGcodeMachine.css" type="text/css" />
  <link rel="stylesheet" href="../../../../static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 

  
  <script src="../../../../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> PythonicGcodeMachine
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview.html">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#what-is-pythonicgcodemachine">1.1. What is PythonicGcodeMachine ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#how-is-pythonicgcodemachine-licensed">1.2. How is PythonicGcodeMachine licensed ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#going-further-with-pythonicgcodemachine">1.3. Going further with PythonicGcodeMachine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#which-platforms-are-supported-by-pythonicgcodemachine">1.4. Which platforms are supported by PythonicGcodeMachine ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#how-to-install-pythonicgcodemachine">1.5. How to install PythonicGcodeMachine ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#which-version-of-python-is-required">1.6. Which version of Python is required ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../news.html">2. News</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../news.html#v0-2018-12-22">2.1. V0 2018-12-22</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../roadmap.html">3. Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">4. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#on-windows">4.1. On Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#on-linux">4.2. On Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#on-osx">4.3. On OSX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#installation-from-pypi-repository">4.4. Installation from PyPi Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#install-a-more-recent-version-from-github">4.5. Install a more recent version from Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#installation-from-source">4.6. Installation from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#dependencies">4.7. Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">5. User FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../faq.html#how-to-get-help-or-report-an-issue">5.1. How to get help or report an issue ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../design-notes.html">6. Design Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../design-notes.html#g-code-parser">6.1. G-Code Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../design-notes.html#g-code-flavours">6.2. G-code flavours</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference-manual.html">7. API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/PythonicGcodeMachine.html">7.1. PythonicGcodeMachine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode.html">7.1.1. Gcode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/Fanuc.html">7.1.1.1. Fanuc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/Heidenhain.html">7.1.1.2. Heidenhain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/LinuxCnc.html">7.1.1.3. LinuxCnc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/MachineKit.html">7.1.1.4. MachineKit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274.html">7.1.1.5. Rs274</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Machine.html">7.1.2. Machine</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/PythonLexYacc.html">7.1.3. PythonLexYacc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/PythonLexYacc/lex.html">7.1.3.1. lex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/PythonLexYacc/yacc.html">7.1.3.2. yacc</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference-manual.html#indexes">7.2. Indexes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development.html">8. Development &amp; Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../development.html#how-you-can-help">8.1. How you can help ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development.html#contributors">8.2. Contributors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how-to-refer.html">9. How to Refer to PythonicGcodeMachine ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../donate.html">10. How to Help Further ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../related-projects.html">11. Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../related-projects.html#g-code-tools">11.1. G-code Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../related-projects.html#cam-tools">11.2. CAM Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bibliography.html">12. Bibliography</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../bibliography.html#g-code">12.1. G-Code</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">PythonicGcodeMachine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>PythonicGcodeMachine.Gcode.Rs274.Parser</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for PythonicGcodeMachine.Gcode.Rs274.Parser</h1><div class="highlight"><pre>
<span></span><span class="c1">####################################################################################################</span>
<span class="c1">#</span>
<span class="c1"># PythonicGcodeMachine - @licence_header_description@</span>
<span class="c1"># Copyright (C) 2018 Fabrice Salvaire</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>
<span class="c1">####################################################################################################</span>

<span class="sd">&quot;&quot;&quot;Module to implement a RS-274 G-code parser.</span>

<span class="sd">Usage::</span>

<span class="sd">   parser = GcodeParser()</span>
<span class="sd">   ast_line = parser.parse(gcode_line)</span>
<span class="sd">   ast_program = parser.parse_lines(gcode_lines)</span>

<span class="sd">**Implementation**</span>

<span class="sd">The parser is generated automatically from the grammar defined in this class using the generator</span>
<span class="sd">`PLY &lt;https://www.dabeaz.com/ply/ply.html&gt;`_ which implement a LALR(1) parser similar to the</span>
<span class="sd">tools **lex** and **yacc**.</span>

<span class="sd">The parser construct an `abstract syntax tree (AST)</span>
<span class="sd">&lt;https://en.wikipedia.org/wiki/Abstract_syntax_tree&gt;`_ during the parsing.</span>

<span class="sd">User can subclass this parser to support a derived G-code flavour.</span>

<span class="sd">**For references, see**</span>

<span class="sd">* `The NIST RS274NGC Interpreter — Version 3 — Appendix E. Production Rules for the RS274/NGC Language</span>
<span class="sd">  &lt;https://www.nist.gov/publications/nist-rs274ngc-interpreter-version-3&gt;`_</span>
<span class="sd">* http://linuxcnc.org/docs/2.7/html/gcode/overview.html</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;GcodeParserError&#39;</span><span class="p">,</span>
    <span class="s1">&#39;GcodeParser&#39;</span><span class="p">,</span>
    <span class="s1">&#39;GcodeParserMixin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;GcodeGrammarMixin&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1">####################################################################################################</span>

<span class="c1"># https://rply.readthedocs.io/en/latest/</span>
<span class="kn">from</span> <span class="nn">ply</span> <span class="k">import</span> <span class="n">yacc</span>

<span class="kn">from</span> <span class="nn">.</span> <span class="k">import</span> <span class="n">Ast</span>
<span class="kn">from</span> <span class="nn">.Lexer</span> <span class="k">import</span> <span class="n">GcodeLexer</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="GcodeParserError"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeParserError">[docs]</a><span class="k">class</span> <span class="nc">GcodeParserError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="k">pass</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="GcodeGrammarMixin"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin">[docs]</a><span class="k">class</span> <span class="nc">GcodeGrammarMixin</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;Mixin to implement the grammar.</span>

<span class="sd">    **Production Language for RS-274**</span>

<span class="sd">    The symbols in the productions are mostly standard syntax notation. Meanings of the symbols</span>
<span class="sd">    are:</span>

<span class="sd">      * ``=`` The symbol on the left of the equal sign is equivalent to the expression on the right</span>
<span class="sd">      * ``+`` followed by</span>
<span class="sd">      * ``|`` or</span>
<span class="sd">      * ``.`` end of production (a production may have several lines)</span>
<span class="sd">      * ``[]`` zero or one of the expression inside square brackets may occur</span>
<span class="sd">      * ``{}`` zero to many of the expression inside curly braces may occur</span>
<span class="sd">      * ``()`` exactly one of the expression inside parentheses must occur</span>

<span class="sd">    The productions are:</span>

<span class="sd">      * arc_tangent_combo = arc_tangent + expression + divided_by + expression .</span>
<span class="sd">      * binary_operation = binary_operation1 | binary_operation2 | binary_operation3 .</span>
<span class="sd">      * binary_operation1 = power .</span>
<span class="sd">      * binary_operation2 = divided_by | modulo | times .</span>
<span class="sd">      * binary_operation3 = and | exclusive_or | minus | non_exclusive_or | plus .</span>
<span class="sd">      * comment = message | ordinary_comment .</span>
<span class="sd">      * expression = left_bracket + real_value + { binary_operation + real_value } + right_bracket .</span>
<span class="sd">      * line = [block_delete] + [line_number] + {segment} + end_of_line .</span>
<span class="sd">      * line_number = letter_n + digit + [digit] + [digit] + [digit] + [digit] .</span>
<span class="sd">      * message = left_parenthesis + {white_space} + letter_m + {white_space} + letter_s +</span>
<span class="sd">        {white_space} + letter_g + {white_space} + comma + {comment_character} +</span>
<span class="sd">        right_parenthesis .</span>
<span class="sd">      * mid_line_letter = letter_a | letter_b | letter_c| letter_d | letter_f | letter_g | letter_h | letter_i</span>
<span class="sd">        | letter_j | letter_k | letter_l | letter_m | letter_p | letter_q | letter_r | letter_s | letter_t</span>
<span class="sd">        | letter_x | letter_y | letter_z .</span>
<span class="sd">      * mid_line_word = mid_line_letter + real_value .</span>
<span class="sd">      * ordinary_comment = left_parenthesis + {comment_character} + right_parenthesis .</span>
<span class="sd">      * ordinary_unary_combo = ordinary_unary_operation + expression .</span>
<span class="sd">      * ordinary_unary_operation =</span>
<span class="sd">        absolute_value | arc_cosine | arc_sine | cosine | e_raised_to |</span>
<span class="sd">        fix_down | fix_up | natural_log_of | round | sine | square_root | tangent .</span>
<span class="sd">      * parameter_index = real_value .</span>
<span class="sd">      * parameter_setting = parameter_sign + parameter_index + equal_sign + real_value .</span>
<span class="sd">      * parameter_value = parameter_sign + parameter_index .</span>
<span class="sd">      * real_number =</span>
<span class="sd">        [ plus | minus ] +</span>
<span class="sd">        (( digit + { digit } + [decimal_point] + {digit}) | ( decimal_point + digit + {digit})) .</span>
<span class="sd">      * real_value = real_number | expression | parameter_value | unary_combo .</span>
<span class="sd">      * segment = mid_line_word | comment | parameter_setting .</span>
<span class="sd">      * unary_combo = ordinary_unary_combo | arc_tangent_combo .</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Build the operation map</span>
    <span class="c1"># Note: sphinx show locals if not _foo</span>
    <span class="n">__operation_map__</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">_cls_name</span> <span class="ow">in</span> <span class="n">Ast</span><span class="o">.</span><span class="n">__all__</span><span class="p">:</span>
        <span class="n">_cls</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">Ast</span><span class="p">,</span> <span class="n">_cls_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">_cls</span><span class="p">,</span> <span class="s1">&#39;__gcode__&#39;</span><span class="p">):</span>
            <span class="n">__operation_map__</span><span class="p">[</span><span class="n">_cls</span><span class="o">.</span><span class="n">__gcode__</span><span class="p">]</span> <span class="o">=</span> <span class="n">_cls</span>

    <span class="c1">##############################################</span>

    <span class="c1"># Start symbol</span>
<div class="viewcode-block" id="GcodeGrammarMixin.p_line"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_line">[docs]</a>    <span class="k">def</span> <span class="nf">p_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;line : DIVIDED_BY line_right</span>
<span class="sd">                | line_right</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line</span><span class="o">.</span><span class="n">deleted</span> <span class="o">=</span> <span class="kc">True</span></div>
        <span class="c1"># p[0] = self._line</span>

<div class="viewcode-block" id="GcodeGrammarMixin.p_line_right"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_line_right">[docs]</a>    <span class="k">def</span> <span class="nf">p_line_right</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;line_right : line_content</span>
<span class="sd">                      | line_content EOF_COMMENT</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line</span><span class="o">.</span><span class="n">comment</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div>
        <span class="c1"># p[0] = self._line</span>

<div class="viewcode-block" id="GcodeGrammarMixin.p_line_content"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_line_content">[docs]</a>    <span class="k">def</span> <span class="nf">p_line_content</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;line_content : segments&#39;</span></div>
        <span class="c1"># p[0] = self._line</span>

<div class="viewcode-block" id="GcodeGrammarMixin.p_numbered_line"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_numbered_line">[docs]</a>    <span class="k">def</span> <span class="nf">p_numbered_line</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;line_content : line_number segments&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_line</span><span class="o">.</span><span class="n">line_number</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>
        <span class="c1"># p[0] = self._line</span>

<div class="viewcode-block" id="GcodeGrammarMixin.p_line_number"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_line_number">[docs]</a>    <span class="k">def</span> <span class="nf">p_line_number</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;line_number : N POSITIVE_INTEGER</span>
<span class="sd">                       | N POSITIVE_REAL</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_segments"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_segments">[docs]</a>    <span class="k">def</span> <span class="nf">p_segments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;segments : segment</span>
<span class="sd">                    | segments segment</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line</span> <span class="o">+=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_line</span> <span class="o">+=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_segment"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_segment">[docs]</a>    <span class="k">def</span> <span class="nf">p_segment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;segment : mid_line_word</span>
<span class="sd">                   | comment</span>
<span class="sd">                   | parameter_setting</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="GcodeGrammarMixin.p_comment"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_comment">[docs]</a>    <span class="k">def</span> <span class="nf">p_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;comment : ordinary_comment&#39;</span>
        <span class="c1"># &#39;comment : message | ordinary_comment&#39;:</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_ordinary_comment"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_ordinary_comment">[docs]</a>    <span class="k">def</span> <span class="nf">p_ordinary_comment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;ordinary_comment : INLINE_COMMENT&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ast</span><span class="o">.</span><span class="n">Comment</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>

    <span class="c1"># def p_message(self, p):</span>
      <span class="c1"># &#39;message : left_parenthesis + {white_space} + letter_m + {white_space} + letter_s +</span>
      <span class="c1">#   {white_space} + letter_g + {white_space} + comma + {comment_character} +</span>
      <span class="c1">#   right_parenthesis .</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="GcodeGrammarMixin.p_mid_line_word"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_mid_line_word">[docs]</a>    <span class="k">def</span> <span class="nf">p_mid_line_word</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;mid_line_word : mid_line_letter real_value&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ast</span><span class="o">.</span><span class="n">Word</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_mid_line_letter"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_mid_line_letter">[docs]</a>    <span class="k">def</span> <span class="nf">p_mid_line_letter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="c1"># LETTER</span>
        <span class="sd">&#39;&#39;&#39;mid_line_letter : A</span>
<span class="sd">                           | B</span>
<span class="sd">                           | C</span>
<span class="sd">                           | D</span>
<span class="sd">                           | F</span>
<span class="sd">                           | G</span>
<span class="sd">                           | H</span>
<span class="sd">                           | I</span>
<span class="sd">                           | J</span>
<span class="sd">                           | K</span>
<span class="sd">                           | L</span>
<span class="sd">                           | M</span>
<span class="sd">                           | P</span>
<span class="sd">                           | Q</span>
<span class="sd">                           | R</span>
<span class="sd">                           | S</span>
<span class="sd">                           | T</span>
<span class="sd">                           | X</span>
<span class="sd">                           | Y</span>
<span class="sd">                           | Z</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_parameter_setting"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_parameter_setting">[docs]</a>    <span class="k">def</span> <span class="nf">p_parameter_setting</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;parameter_setting : PARAMETER_SIGN parameter_index EQUAL_SIGN real_value&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ast</span><span class="o">.</span><span class="n">ParameterSetting</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_parameter_value"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_parameter_value">[docs]</a>    <span class="k">def</span> <span class="nf">p_parameter_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;parameter_value : PARAMETER_SIGN parameter_index&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">Ast</span><span class="o">.</span><span class="n">Parameter</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_parameter_index"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_parameter_index">[docs]</a>    <span class="k">def</span> <span class="nf">p_parameter_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;parameter_index : real_value&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_real_value"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_real_value">[docs]</a>    <span class="k">def</span> <span class="nf">p_real_value</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;real_value : POSITIVE_INTEGER</span>
<span class="sd">                      | POSITIVE_REAL</span>
<span class="sd">                      | REAL</span>
<span class="sd">                      | expression</span>
<span class="sd">                      | parameter_value</span>
<span class="sd">                      | unary_combo</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="GcodeGrammarMixin.p_unary_combo"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_unary_combo">[docs]</a>    <span class="k">def</span> <span class="nf">p_unary_combo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;unary_combo : ordinary_unary_combo</span>
<span class="sd">                       | arc_tangent_combo</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_ordinary_unary_combo"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_ordinary_unary_combo">[docs]</a>    <span class="k">def</span> <span class="nf">p_ordinary_unary_combo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;ordinary_unary_combo : ordinary_unary_operation expression&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__operation_map__</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]](</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_expression"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_expression">[docs]</a>    <span class="k">def</span> <span class="nf">p_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;expression : LEFT_BRACKET inner_expression RIGHT_BRACKET&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_inner_expression"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_inner_expression">[docs]</a>    <span class="k">def</span> <span class="nf">p_inner_expression</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;inner_expression : real_value</span>
<span class="sd">                            | inner_expression binary_operation real_value</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__operation_map__</span><span class="p">[</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]](</span><span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_arc_tangent_combo"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_arc_tangent_combo">[docs]</a>    <span class="k">def</span> <span class="nf">p_arc_tangent_combo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="c1"># atan[1.5]/[1.0]</span>
        <span class="s1">&#39;arc_tangent_combo : ARC_TANGENT expression DIVIDED_BY expression&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">DividedBy</span><span class="p">(</span><span class="n">ArcTangent</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]),</span> <span class="n">p</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_ordinary_unary_operation"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_ordinary_unary_operation">[docs]</a>    <span class="k">def</span> <span class="nf">p_ordinary_unary_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;ordinary_unary_operation : ABSOLUTE_VALUE</span>
<span class="sd">                                    | ARC_COSINE</span>
<span class="sd">                                    | ARC_SINE</span>
<span class="sd">                                    | COSINE</span>
<span class="sd">                                    | E_RAISED_TO</span>
<span class="sd">                                    | FIX_DOWN</span>
<span class="sd">                                    | FIX_UP</span>
<span class="sd">                                    | NATURAL_LOG_OF</span>
<span class="sd">                                    | ROUND</span>
<span class="sd">                                    | SINE</span>
<span class="sd">                                    | SQUARE_ROOT</span>
<span class="sd">                                    | TANGENT</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_binary_operation"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_binary_operation">[docs]</a>    <span class="k">def</span> <span class="nf">p_binary_operation</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;binary_operation : binary_operation1</span>
<span class="sd">                            | binary_operation2</span>
<span class="sd">                            | binary_operation3</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_binary_operation1"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_binary_operation1">[docs]</a>    <span class="k">def</span> <span class="nf">p_binary_operation1</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="s1">&#39;binary_operation1 : POWER&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_binary_operation2"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_binary_operation2">[docs]</a>    <span class="k">def</span> <span class="nf">p_binary_operation2</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;binary_operation2 : DIVIDED_BY</span>
<span class="sd">                             | MODULO</span>
<span class="sd">                             | TIMES</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

<div class="viewcode-block" id="GcodeGrammarMixin.p_binary_operation3"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_binary_operation3">[docs]</a>    <span class="k">def</span> <span class="nf">p_binary_operation3</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;binary_operation3 : AND</span>
<span class="sd">                             | EXCLUSIVE_OR</span>
<span class="sd">                             | MINUS</span>
<span class="sd">                             | NON_EXCLUSIVE_OR</span>
<span class="sd">                             | PLUS</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span></div>

    <span class="c1">##############################################</span>

    <span class="c1"># def p_empty(self, p):</span>
    <span class="c1">#     &#39;empty :&#39;</span>
    <span class="c1">#     pass</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="GcodeGrammarMixin.p_error"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeGrammarMixin.p_error">[docs]</a>    <span class="k">def</span> <span class="nf">p_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
        <span class="k">raise</span> <span class="n">GcodeParserError</span><span class="p">(</span><span class="n">p</span><span class="o">.</span><span class="n">lexpos</span><span class="p">)</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="GcodeParserMixin"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeParserMixin">[docs]</a><span class="k">class</span> <span class="nc">GcodeParserMixin</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;Mixin to implement a RS-274 G-code parser&quot;&quot;&quot;</span>

    <span class="n">__lexer_cls__</span> <span class="o">=</span> <span class="n">GcodeLexer</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_build</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reset</span><span class="p">()</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_line</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">_build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Build the parser&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__lexer_cls__</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">tokens</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">tokens</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span> <span class="o">=</span> <span class="n">yacc</span><span class="o">.</span><span class="n">yacc</span><span class="p">(</span>
            <span class="n">module</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="c1"># debug=True,</span>
            <span class="n">optimize</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="GcodeParserMixin.parse"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeParserMixin.parse">[docs]</a>    <span class="k">def</span> <span class="nf">parse</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">line</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Parse a G-code line.</span>

<span class="sd">        Return a :class:`PythonicGcodeMachine.Gcode.Rs274.Ast.Line` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_line</span> <span class="o">=</span> <span class="n">Ast</span><span class="o">.</span><span class="n">Line</span><span class="p">()</span>
        <span class="n">ast</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_parser</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span>
            <span class="n">line</span><span class="p">,</span>
            <span class="n">lexer</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">_lexer</span><span class="p">,</span>
            <span class="c1"># debug=True,</span>
        <span class="p">)</span>

        <span class="n">line</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_line</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_reset</span><span class="p">()</span>

        <span class="k">return</span> <span class="n">line</span></div>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="GcodeParserMixin.parse_lines"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeParserMixin.parse_lines">[docs]</a>    <span class="k">def</span> <span class="nf">parse_lines</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lines</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;Parse a G-code lines</span>

<span class="sd">        Return a :class:`PythonicGcodeMachine.Gcode.Rs274.Ast.Program` instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">program</span> <span class="o">=</span> <span class="n">Ast</span><span class="o">.</span><span class="n">Program</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">):</span>
            <span class="n">program</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parse</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">program</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="GcodeParser"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Parser.html#PythonicGcodeMachine.Gcode.Rs274.Parser.GcodeParser">[docs]</a><span class="k">class</span> <span class="nc">GcodeParser</span><span class="p">(</span><span class="n">GcodeParserMixin</span><span class="p">,</span> <span class="n">GcodeGrammarMixin</span><span class="p">):</span>
    <span class="k">pass</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Fabrice Salvaire

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../static/jquery.js"></script>
        <script type="text/javascript" src="../../../../static/underscore.js"></script>
        <script type="text/javascript" src="../../../../static/doctools.js"></script>
        <script type="text/javascript" src="../../../../static/getthecode.js"></script>
    

  

  <script type="text/javascript" src="../../../../static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>