

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>PythonicGcodeMachine.Gcode.Rs274.Lexer &mdash; PythonicGcodeMachine 0.1.0 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../../../static/css/PythonicGcodeMachine.css" type="text/css" />
  <link rel="stylesheet" href="../../../../static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 

  
  <script src="../../../../static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../../index.html" class="icon icon-home"> PythonicGcodeMachine
          

          
          </a>

          
            
            
              <div class="version">
                0.1
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../overview.html">1. Overview</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#what-is-pythonicgcodemachine">1.1. What is PythonicGcodeMachine ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#how-is-pythonicgcodemachine-licensed">1.2. How is PythonicGcodeMachine licensed ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#going-further-with-pythonicgcodemachine">1.3. Going further with PythonicGcodeMachine</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#which-platforms-are-supported-by-pythonicgcodemachine">1.4. Which platforms are supported by PythonicGcodeMachine ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#how-to-install-pythonicgcodemachine">1.5. How to install PythonicGcodeMachine ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../overview.html#which-version-of-python-is-required">1.6. Which version of Python is required ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../news.html">2. News</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../news.html#v0-2018-12-22">2.1. V0 2018-12-22</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../roadmap.html">3. Roadmap</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../installation.html">4. Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#on-windows">4.1. On Windows</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#on-linux">4.2. On Linux</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#on-osx">4.3. On OSX</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#installation-from-pypi-repository">4.4. Installation from PyPi Repository</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#install-a-more-recent-version-from-github">4.5. Install a more recent version from Github</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#installation-from-source">4.6. Installation from Source</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../installation.html#dependencies">4.7. Dependencies</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../faq.html">5. User FAQ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../faq.html#how-to-get-help-or-report-an-issue">5.1. How to get help or report an issue ?</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../examples/index.html">6. Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../examples/gcode/index.html">6.1. Gcode</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/gcode/annotate-gcode.html">6.1.1. Annotate a G-code program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/gcode/generate-gcode.html">6.1.2. Generate a G-code program</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../examples/gcode/query-gcode.html">6.1.3. Query G-codes</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../gcode-reference/index.html">7. G-code Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html">7.1. RS-274 G-code Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#history">7.1.1. History</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#overview">7.1.2. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#language-view-of-a-machining-center">7.1.3. Language View of a Machining Center</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#parameters">7.1.3.1. Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#coordinate-systems">7.1.3.2. Coordinate Systems</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#format-of-a-line">7.1.4. Format of a Line</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#line-number">7.1.4.1. Line Number</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#word">7.1.4.2. Word</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#number">7.1.4.3. Number</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#parameter-value">7.1.4.4. Parameter Value</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#expressions-and-binary-operations">7.1.4.5. Expressions and Binary Operations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#unary-operation-value">7.1.4.6. Unary Operation Value</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#parameter-setting">7.1.4.7. Parameter Setting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#comments-and-messages">7.1.4.8. Comments and Messages</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#item-repeats">7.1.4.9. Item Repeats</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#item-order">7.1.4.10. Item order</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#commands-and-machine-modes">7.1.4.11. Commands and Machine Modes</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#modal-groups">7.1.5. Modal Groups</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#g-and-input-codes">7.1.6. G and Input Codes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../../gcode-reference/rs-274/index.html#order-of-execution">7.1.7. Order of Execution</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../design-notes.html">8. Design Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../design-notes.html#g-code-parser">8.1. G-Code Parser</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../design-notes.html#g-code-flavours">8.2. G-code flavours</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../design-notes.html#g-code-generation-and-simulation">8.3. G-code Generation and Simulation</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../design-notes.html#computational-geometry-engine">8.4. Computational Geometry Engine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../design-notes.html#list-of-the-main-open-source-computational-geometry-algorithms-libraries">8.4.1. List of the Main Open Source Computational Geometry Algorithms Libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../design-notes.html#the-computational-geometry-algorithms-library">8.4.1.1. The Computational Geometry Algorithms Library</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../design-notes.html#open-cascade">8.4.1.2. Open CASCADE</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../design-notes.html#g-code-visualisation">8.5. G-code Visualisation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../reference-manual.html">9. API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../api/PythonicGcodeMachine.html">9.1. PythonicGcodeMachine</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode.html">9.1.1. Gcode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/Fanuc.html">9.1.1.1. Fanuc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/Heidenhain.html">9.1.1.2. Heidenhain</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/LinuxCnc.html">9.1.1.3. LinuxCnc</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/MachineKit.html">9.1.1.4. MachineKit</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274.html">9.1.1.5. Rs274</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/Machine.html">9.1.2. Machine</a><ul class="simple">
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/PythonLexYacc.html">9.1.3. PythonLexYacc</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/PythonLexYacc/lex.html">9.1.3.1. lex</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../../api/PythonicGcodeMachine/PythonLexYacc/yacc.html">9.1.3.2. yacc</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../../reference-manual.html#indexes">9.2. Indexes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../development.html">10. Development &amp; Community</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../development.html#how-you-can-help">10.1. How you can help ?</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../development.html#contributors">10.2. Contributors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../how-to-refer.html">11. How to Refer to PythonicGcodeMachine ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../donate.html">12. How to Help Further ?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../related-projects.html">13. Related Projects</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../related-projects.html#g-code-tools">13.1. G-code Tools</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../../related-projects.html#cam-tools">13.2. CAM Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../bibliography.html">14. Bibliography</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../../bibliography.html#g-code">14.1. G-Code</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">PythonicGcodeMachine</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../../index.html">Module code</a> &raquo;</li>
        
      <li>PythonicGcodeMachine.Gcode.Rs274.Lexer</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for PythonicGcodeMachine.Gcode.Rs274.Lexer</h1><div class="highlight"><pre>
<span></span><span class="c1">####################################################################################################</span>
<span class="c1">#</span>
<span class="c1"># PythonicGcodeMachine - A Python G-code Toolkit</span>
<span class="c1"># Copyright (C) 2018 Fabrice Salvaire</span>
<span class="c1">#</span>
<span class="c1"># This program is free software: you can redistribute it and/or modify</span>
<span class="c1"># it under the terms of the GNU General Public License as published by</span>
<span class="c1"># the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1"># (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1"># This program is distributed in the hope that it will be useful,</span>
<span class="c1"># but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1"># MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1"># GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1"># You should have received a copy of the GNU General Public License</span>
<span class="c1"># along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="c1">#</span>
<span class="c1">####################################################################################################</span>

<span class="sd">&quot;&quot;&quot;Module to implement a RS-274 G-code lexer.&quot;&quot;&quot;</span>

<span class="c1">####################################################################################################</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;GcodeLexerError&#39;</span><span class="p">,</span>
    <span class="s1">&#39;GcodeLexer&#39;</span><span class="p">,</span>
    <span class="s1">&#39;GcodeLexerMixin&#39;</span><span class="p">,</span>
    <span class="s1">&#39;GcodeTokenMixin&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="c1">####################################################################################################</span>

<span class="kn">import</span> <span class="nn">re</span>

<span class="k">try</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">ply.lex</span> <span class="k">as</span> <span class="nn">lexer</span>
<span class="k">except</span> <span class="n">ModuleNotFoundError</span><span class="p">:</span>
    <span class="kn">import</span> <span class="nn">PythonicGcodeMachine.PythonLexYacc.lex</span> <span class="k">as</span> <span class="nn">lexer</span>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="GcodeLexerError"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeLexerError">[docs]</a><span class="k">class</span> <span class="nc">GcodeLexerError</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
    <span class="k">pass</span></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="GcodeTokenMixin"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeTokenMixin">[docs]</a><span class="k">class</span> <span class="nc">GcodeTokenMixin</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;Mixin to define RS-274 G-code tokens. &quot;&quot;&quot;</span>

    <span class="c1"># List of token names.</span>
    <span class="n">tokens</span> <span class="o">=</span> <span class="p">(</span>
        <span class="s1">&#39;ABSOLUTE_VALUE&#39;</span><span class="p">,</span>
        <span class="s1">&#39;AND&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ARC_COSINE&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ARC_SINE&#39;</span><span class="p">,</span>
        <span class="s1">&#39;ARC_TANGENT&#39;</span><span class="p">,</span>
        <span class="s1">&#39;COSINE&#39;</span><span class="p">,</span>
        <span class="s1">&#39;DIVIDED_BY&#39;</span><span class="p">,</span>
        <span class="s1">&#39;EQUAL_SIGN&#39;</span><span class="p">,</span>
        <span class="s1">&#39;EXCLUSIVE_OR&#39;</span><span class="p">,</span>
        <span class="s1">&#39;E_RAISED_TO&#39;</span><span class="p">,</span>
        <span class="s1">&#39;FIX_DOWN&#39;</span><span class="p">,</span>
        <span class="s1">&#39;FIX_UP&#39;</span><span class="p">,</span>
        <span class="s1">&#39;LEFT_BRACKET&#39;</span><span class="p">,</span>
        <span class="c1"># &#39;LEFT_PARENTHESIS&#39;,</span>
        <span class="s1">&#39;MINUS&#39;</span><span class="p">,</span>
        <span class="s1">&#39;MODULO&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NATURAL_LOG_OF&#39;</span><span class="p">,</span>
        <span class="s1">&#39;NON_EXCLUSIVE_OR&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PARAMETER_SIGN&#39;</span><span class="p">,</span>
        <span class="s1">&#39;PLUS&#39;</span><span class="p">,</span>
        <span class="s1">&#39;POWER&#39;</span><span class="p">,</span>
        <span class="s1">&#39;RIGHT_BRACKET&#39;</span><span class="p">,</span>
        <span class="c1"># &#39;RIGHT_PARENTHESIS&#39;,</span>
        <span class="s1">&#39;ROUND&#39;</span><span class="p">,</span>
        <span class="s1">&#39;SINE&#39;</span><span class="p">,</span>
        <span class="s1">&#39;SQUARE_ROOT&#39;</span><span class="p">,</span>
        <span class="s1">&#39;TANGENT&#39;</span><span class="p">,</span>
        <span class="s1">&#39;TIMES&#39;</span><span class="p">,</span>

        <span class="c1"># &#39;LETTER&#39;,</span>
        <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">,</span>
        <span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">,</span> <span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span> <span class="s1">&#39;J&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;M&#39;</span><span class="p">,</span>
        <span class="s1">&#39;P&#39;</span><span class="p">,</span> <span class="s1">&#39;Q&#39;</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span>
        <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="s1">&#39;Y&#39;</span><span class="p">,</span> <span class="s1">&#39;Z&#39;</span><span class="p">,</span>
        <span class="s1">&#39;N&#39;</span><span class="p">,</span>

        <span class="s1">&#39;POSITIVE_INTEGER&#39;</span><span class="p">,</span>
        <span class="s1">&#39;POSITIVE_REAL&#39;</span><span class="p">,</span>
        <span class="s1">&#39;REAL&#39;</span><span class="p">,</span>
        <span class="s1">&#39;INLINE_COMMENT&#39;</span><span class="p">,</span>
        <span class="s1">&#39;EOF_COMMENT&#39;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Regular expression rules for simple tokens</span>
    <span class="n">t_ABSOLUTE_VALUE</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;abs&#39;</span>
    <span class="n">t_AND</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;and&#39;</span>
    <span class="n">t_ARC_COSINE</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;acos&#39;</span>
    <span class="n">t_ARC_SINE</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;asin&#39;</span>
    <span class="n">t_ARC_TANGENT</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;atan&#39;</span>
    <span class="c1"># t_BLOCK_DELETE = r&#39;\/&#39; # slash</span>
    <span class="n">t_COSINE</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;cos&#39;</span>
    <span class="n">t_DIVIDED_BY</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\/&#39;</span> <span class="c1"># slash</span>
    <span class="n">t_EQUAL_SIGN</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;=&#39;</span>
    <span class="n">t_EXCLUSIVE_OR</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;xor&#39;</span>
    <span class="n">t_E_RAISED_TO</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;exp&#39;</span>
    <span class="n">t_FIX_DOWN</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;fix&#39;</span>
    <span class="n">t_FIX_UP</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;fup&#39;</span>
    <span class="n">t_LEFT_BRACKET</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\[&#39;</span>
    <span class="c1"># t_LEFT_PARENTHESIS = r&#39;\(&#39;</span>
    <span class="n">t_MINUS</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;-&#39;</span>
    <span class="n">t_MODULO</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;mod&#39;</span>
    <span class="n">t_NATURAL_LOG_OF</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;ln&#39;</span>
    <span class="n">t_NON_EXCLUSIVE_OR</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;or&#39;</span>
    <span class="n">t_PARAMETER_SIGN</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\#&#39;</span>
    <span class="n">t_PLUS</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\+&#39;</span>
    <span class="n">t_POWER</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\*\*&#39;</span>
    <span class="n">t_RIGHT_BRACKET</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\]&#39;</span>
    <span class="c1"># t_RIGHT_PARENTHESIS = r&#39;\)&#39;</span>
    <span class="n">t_ROUND</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;round&#39;</span>
    <span class="n">t_SINE</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sin&#39;</span>
    <span class="n">t_SQUARE_ROOT</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;sqrt&#39;</span>
    <span class="n">t_TANGENT</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;tan&#39;</span>
    <span class="n">t_TIMES</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;\*&#39;</span>

    <span class="c1"># clash with acos ... ???</span>
    <span class="c1"># t_LETTER = r&#39;(&#39; + &#39;|&#39;.join(&#39;abcd&#39; + &#39;fghijklm&#39; + &#39;pqrst&#39; + &#39;xyz&#39;) + &#39;)&#39;</span>

    <span class="n">t_A</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;a&#39;</span>
    <span class="n">T_B</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;b&#39;</span>
    <span class="n">t_C</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;c&#39;</span>
    <span class="n">t_D</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;d&#39;</span>

    <span class="n">t_F</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;f&#39;</span>
    <span class="n">t_G</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;g&#39;</span>
    <span class="n">t_H</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;h&#39;</span>
    <span class="n">t_I</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;i&#39;</span>
    <span class="n">t_J</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;j&#39;</span>
    <span class="n">t_K</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;k&#39;</span>
    <span class="n">t_L</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;l&#39;</span>
    <span class="n">t_M</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;m&#39;</span>

    <span class="n">t_P</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;p&#39;</span>
    <span class="n">t_Q</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;q&#39;</span>
    <span class="n">t_R</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;r&#39;</span>
    <span class="n">t_S</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;s&#39;</span>
    <span class="n">t_T</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;t&#39;</span>

    <span class="n">t_X</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;x&#39;</span>
    <span class="n">t_Y</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;y&#39;</span>
    <span class="n">t_Z</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;z&#39;</span>

    <span class="n">t_N</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;n&#39;</span>

    <span class="c1"># def t_POSITIVE_INTEGER(self, t):</span>
    <span class="c1">#     r&#39;\d+&#39;</span>
    <span class="c1">#     t.value = int(t.value)</span>
    <span class="c1">#     return t</span>

    <span class="c1"># def t_POSITIVE_REAL(self, t):</span>
    <span class="c1">#     r&#39;\d*\.\d+&#39;</span>
    <span class="c1">#     t.value = float(t.value)</span>
    <span class="c1">#     return t</span>

<div class="viewcode-block" id="GcodeTokenMixin.t_REAL"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeTokenMixin.t_REAL">[docs]</a>    <span class="k">def</span> <span class="nf">t_REAL</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="c1"># r&#39;((-)?((\d*\.\d+)(E[\+-]?\d+)?|([1-9]\d*E[\+-]?\d+)))&#39;</span>
        <span class="sa">r</span><span class="s1">&#39;((\+|-)?(\d+\.\d*|(\.)?\d+))&#39;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span>
        <span class="k">if</span> <span class="s1">&#39;.&#39;</span> <span class="ow">in</span> <span class="n">value</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">value</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;POSITIVE_REAL&#39;</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;REAL&#39;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">value</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
            <span class="n">t</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="s1">&#39;POSITIVE_INTEGER&#39;</span>
        <span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">t</span></div>

<div class="viewcode-block" id="GcodeTokenMixin.t_INLINE_COMMENT"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeTokenMixin.t_INLINE_COMMENT">[docs]</a>    <span class="k">def</span> <span class="nf">t_INLINE_COMMENT</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sa">r</span><span class="s1">&#39;\([^\)]*\)&#39;</span>
        <span class="n">value</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">position</span> <span class="o">=</span> <span class="n">value</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s1">&#39;(&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">position</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">GcodeLexerError</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">lexpos</span> <span class="o">+</span> <span class="n">position</span> <span class="o">+</span><span class="mi">1</span><span class="p">)</span>
        <span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>
        <span class="k">return</span> <span class="n">t</span></div>

<div class="viewcode-block" id="GcodeTokenMixin.t_EOF_COMMENT"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeTokenMixin.t_EOF_COMMENT">[docs]</a>    <span class="k">def</span> <span class="nf">t_EOF_COMMENT</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="sa">r</span><span class="s1">&#39;;.*&#39;</span>
        <span class="n">t</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">value</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">t</span></div>

    <span class="c1"># Ignored characters (spaces and tabs)</span>
    <span class="n">t_ignore</span>  <span class="o">=</span> <span class="s1">&#39; </span><span class="se">\t</span><span class="s1">&#39;</span>

<div class="viewcode-block" id="GcodeTokenMixin.t_error"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeTokenMixin.t_error">[docs]</a>    <span class="k">def</span> <span class="nf">t_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
        <span class="s1">&#39;Error handling rule&#39;</span>
        <span class="c1"># t.lexer.skip(1)</span>
        <span class="c1"># raise GcodeLexerError(&quot;Illegal character @{} &#39;{}&#39;&quot;.format(t.lexpos, t.value))</span>
        <span class="k">raise</span> <span class="n">GcodeLexerError</span><span class="p">(</span><span class="n">t</span><span class="o">.</span><span class="n">lexpos</span><span class="p">)</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="GcodeLexerMixin"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeLexerMixin">[docs]</a><span class="k">class</span> <span class="nc">GcodeLexerMixin</span><span class="p">:</span>

    <span class="sd">&quot;&quot;&quot;Class to implement a RS-274 G-code lexer.&quot;&quot;&quot;</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_build</span><span class="p">()</span>

    <span class="c1">##############################################</span>

    <span class="k">def</span> <span class="nf">_build</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;Build the lexer&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span> <span class="o">=</span> <span class="n">lexer</span><span class="o">.</span><span class="n">lex</span><span class="p">(</span>
            <span class="n">module</span><span class="o">=</span><span class="bp">self</span><span class="p">,</span>
            <span class="n">reflags</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">VERBOSE</span> <span class="o">+</span> <span class="n">re</span><span class="o">.</span><span class="n">IGNORECASE</span><span class="p">),</span>
            <span class="n">optimize</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="n">lextab</span><span class="o">=</span><span class="s1">&#39;_lextab&#39;</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="GcodeLexerMixin.input"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeLexerMixin.input">[docs]</a>    <span class="k">def</span> <span class="nf">input</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span></div>

    <span class="c1">##############################################</span>

<div class="viewcode-block" id="GcodeLexerMixin.tokenize"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeLexerMixin.tokenize">[docs]</a>    <span class="k">def</span> <span class="nf">tokenize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">input</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">token</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_lexer</span><span class="o">.</span><span class="n">token</span><span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">token</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">yield</span> <span class="n">token</span></div></div>

<span class="c1">####################################################################################################</span>

<div class="viewcode-block" id="GcodeLexer"><a class="viewcode-back" href="../../../../api/PythonicGcodeMachine/Gcode/Rs274/Lexer.html#PythonicGcodeMachine.Gcode.Rs274.Lexer.GcodeLexer">[docs]</a><span class="k">class</span> <span class="nc">GcodeLexer</span><span class="p">(</span><span class="n">GcodeLexerMixin</span><span class="p">,</span> <span class="n">GcodeTokenMixin</span><span class="p">):</span>
    <span class="k">pass</span></div>
</pre></div>

           </div>
           
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Fabrice Salvaire

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../../" src="../../../../static/documentation_options.js"></script>
        <script type="text/javascript" src="../../../../static/jquery.js"></script>
        <script type="text/javascript" src="../../../../static/underscore.js"></script>
        <script type="text/javascript" src="../../../../static/doctools.js"></script>
        <script type="text/javascript" src="../../../../static/language_data.js"></script>
        <script type="text/javascript" src="../../../../static/getthecode.js"></script>
    

  

  <script type="text/javascript" src="../../../../static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(false);
      });
  </script> 

</body>
</html>